!function(){"use strict";function n(n){const t=document.createElement("div");return t.textContent=n,t.innerHTML}function t(t){return`\n      <div class="commitlog-header">\n        <h3>Что нового</h3>\n        <button class="commitlog-close">\n          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n            <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>\n          </svg>\n        </button>\n      </div>\n      <div class="commitlog-content">\n        ${t.logs.length>0?t.logs.map(t=>function(t){return`\n      <div class="commitlog-item">\n        <div class="commitlog-item-header">\n          <span class="commitlog-badge-type commitlog-badge-${t.type}">${"feat"===t.type?"Новое":"fix"===t.type?"Исправлено":"Улучшено"}</span>\n          <span class="commitlog-item-date">${t.date}</span>\n        </div>\n        <div class="commitlog-item-title">${n(t.title)}</div>\n        ${t.description?`<div class="commitlog-item-description">${n(t.description)}</div>`:""}\n      </div>\n    `}(t)).join(""):'<p style="text-align: center; color: #9ca3af; padding: 40px 20px;">Нет обновлений</p>'}\n      </div>\n      ${t.showBranding?'\n        <div class="commitlog-footer">\n          <div class="commitlog-branding">\n            Powered by <a href="https://commitlog.io" target="_blank">CommitLog</a>\n          </div>\n        </div>\n      ':""}\n    `}class o{constructor(n){this.data=null,this.isOpen=!1,this.container=null,this.button=null,this.modal=null,this.apiKey=n,this.apiUrl=function(){const n=document.currentScript;if(n&&n.src)return`${new URL(n.src).origin}/api/v1/logs`;return"http://localhost:3000/api/v1/logs"}(),this.init()}async init(){this.data=await async function(n,t){try{const o=await fetch(`${t}?key=${n}`);return o.ok?await o.json():null}catch(o){return null}}(this.apiKey,this.apiUrl),this.data&&(!function(n){const t=document.createElement("style");t.textContent=`\n      .commitlog-container * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      .commitlog-button {\n        position: fixed;\n        ${"bottom-left"===n.position?"left: 20px;":"right: 20px;"}\n        bottom: 20px;\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        background: ${n.color};\n        border: none;\n        cursor: pointer;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 999999;\n        transition: transform 0.2s, box-shadow 0.2s;\n      }\n\n      .commitlog-button:hover {\n        transform: scale(1.05);\n        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n      }\n\n      .commitlog-button svg {\n        width: 24px;\n        height: 24px;\n        fill: white;\n      }\n\n      .commitlog-badge {\n        position: absolute;\n        top: -4px;\n        right: -4px;\n        background: #ef4444;\n        color: white;\n        border-radius: 10px;\n        padding: 2px 6px;\n        font-size: 11px;\n        font-weight: bold;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n      }\n\n      .commitlog-backdrop {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 1000000;\n        opacity: 0;\n        transition: opacity 0.3s;\n        display: none;\n      }\n\n      .commitlog-backdrop.open {\n        display: block;\n        opacity: 1;\n      }\n\n      .commitlog-modal {\n        position: fixed;\n        ${"bottom-left"===n.position?"left: 20px;":"right: 20px;"}\n        bottom: 90px;\n        width: 380px;\n        max-width: calc(100vw - 40px);\n        max-height: 600px;\n        background: white;\n        border-radius: 12px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n        z-index: 1000001;\n        transform: translateY(20px);\n        opacity: 0;\n        transition: transform 0.3s, opacity 0.3s;\n        display: none;\n        flex-direction: column;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n      }\n\n      .commitlog-modal.open {\n        display: flex;\n        transform: translateY(0);\n        opacity: 1;\n      }\n\n      .commitlog-header {\n        padding: 20px;\n        border-bottom: 1px solid #e5e7eb;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n\n      .commitlog-header h3 {\n        font-size: 18px;\n        font-weight: 600;\n        color: #111827;\n      }\n\n      .commitlog-close {\n        background: none;\n        border: none;\n        cursor: pointer;\n        padding: 4px;\n        color: #6b7280;\n        transition: color 0.2s;\n      }\n\n      .commitlog-close:hover {\n        color: #111827;\n      }\n\n      .commitlog-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px 20px;\n      }\n\n      .commitlog-item {\n        margin-bottom: 16px;\n        padding-bottom: 16px;\n        border-bottom: 1px solid #f3f4f6;\n      }\n\n      .commitlog-item:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n\n      .commitlog-item-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        margin-bottom: 8px;\n      }\n\n      .commitlog-badge-type {\n        padding: 4px 8px;\n        border-radius: 4px;\n        font-size: 11px;\n        font-weight: 600;\n        text-transform: uppercase;\n      }\n\n      .commitlog-badge-feat {\n        background: #d1fae5;\n        color: #065f46;\n      }\n\n      .commitlog-badge-fix {\n        background: #dbeafe;\n        color: #1e40af;\n      }\n\n      .commitlog-badge-improvement {\n        background: #f3f4f6;\n        color: #374151;\n      }\n\n      .commitlog-item-date {\n        font-size: 12px;\n        color: #6b7280;\n      }\n\n      .commitlog-item-title {\n        font-size: 14px;\n        font-weight: 500;\n        color: #111827;\n        margin-bottom: 4px;\n      }\n\n      .commitlog-item-description {\n        font-size: 13px;\n        color: #6b7280;\n        line-height: 1.5;\n      }\n\n      .commitlog-footer {\n        padding: 12px 20px;\n        border-top: 1px solid #e5e7eb;\n        text-align: center;\n      }\n\n      .commitlog-branding {\n        font-size: 12px;\n        color: #9ca3af;\n      }\n\n      .commitlog-branding a {\n        color: ${n.color};\n        text-decoration: none;\n        font-weight: 500;\n      }\n\n      .commitlog-branding a:hover {\n        text-decoration: underline;\n      }\n\n      @media (max-width: 480px) {\n        .commitlog-modal {\n          left: 10px !important;\n          right: 10px !important;\n          width: calc(100vw - 20px);\n          bottom: 80px;\n        }\n\n        .commitlog-button {\n          left: 10px !important;\n          right: 10px !important;\n        }\n      }\n    `,document.head.appendChild(t)}(this.data),this.createWidget())}createWidget(){if(!this.data)return;var n;this.container=document.createElement("div"),this.container.className="commitlog-container",this.button=document.createElement("button"),this.button.className="commitlog-button",this.button.innerHTML=`\n      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>\n      </svg>\n      ${(n=this.data).logs.length>0?`<span class="commitlog-badge">${n.logs.length}</span>`:""}\n    `,this.button.addEventListener("click",()=>this.toggle());const o=document.createElement("div");o.className="commitlog-backdrop",o.addEventListener("click",()=>this.close()),this.modal=document.createElement("div"),this.modal.className="commitlog-modal",this.modal.innerHTML=t(this.data);const i=this.modal.querySelector(".commitlog-close");null==i||i.addEventListener("click",()=>this.close()),this.container.appendChild(this.button),this.container.appendChild(o),this.container.appendChild(this.modal),document.body.appendChild(this.container)}toggle(){this.isOpen?this.close():this.open()}open(){var n,t;this.isOpen=!0;const o=null==(n=this.container)?void 0:n.querySelector(".commitlog-backdrop");null==o||o.classList.add("open"),null==(t=this.modal)||t.classList.add("open")}close(){var n,t;this.isOpen=!1;const o=null==(n=this.container)?void 0:n.querySelector(".commitlog-backdrop");null==o||o.classList.remove("open"),null==(t=this.modal)||t.classList.remove("open")}}!function(){const n=document.currentScript,t=null==n?void 0:n.getAttribute("data-id");t&&new o(t)}()}();
